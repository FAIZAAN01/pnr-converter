<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!--content type header charset utf-8-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>International PNR Converter | Human-Readable Itinerary Output</title>
    <link rel="shortcut icon" href="pass.jpeg" type="image/x-icon">
    <!--<link rel="stylesheet" href="style.css">-->
    <meta name="description" content="Convert PNR data into a readable itinerary format with customizable options.">

    <meta property="og:title" content="PNR Converter - Convert Flight PNR to Readable Itinerary">
    <meta property="og:description"
          content="Easily convert airline PNR data into a clear, human-readable itinerary format.">
    <meta property="og:image" content="pass.jpeg">
    <meta property="og:type" content="website">
    <style>
        /* --- THEME VARIABLES --- */
        :root {
            --primary-blue: #4A69BD;
            --primary-blue-hover: #415C9E;
            --secondary-dark: #8395A7;
            --secondary-dark-hover: #748392;
            --danger-red: #E57373;
            --danger-red-hover: #D35454;
            --success-green: #2ECC71;
            --success-green-hover: #28B463;
            --history-purple: #D4AF37;
            --history-purple-hover: #BC9B31;
            --transit-long-yellow: #f39c12;
            /* Light Theme (Default) */
            --bg-main: #F5F7FA;
            --bg-card: #FFFFFF;
            --bg-input: var(--light-bg);
            --bg-hover: #e9ecef;
            --text-main: #34495E;
            --text-secondary: Gray;
            --border-main: #E0E6EC;
        }

        /* Dark Theme Definition */
        [data-theme='dark'] {
            --bg-main: #2c3e50;
            --bg-card: #34495e;
            --bg-input: #2c3e50;
            --bg-hover: #4a69bd;
            --text-main: #ecf0f1;
            --text-secondary: white;
            --border-main: #4a69bd;
        }

        /* --- BASE STYLES --- */
        body {
            font-family: Raleway, sans-serif;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--bg-main);
            color: var(--text-main);
            transition: background-color 0.3s, color 0.3s;
            margin-bottom: 50px;
        }

        h1,
        h2,
        h3 {
            color: var(--text-main);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        hr {
            border: 0;
            border-top: 1px solid var(--border-main);
        }

        .container {
            display: flex;
            gap: 30px;
            align-items: flex-start;
            max-width: 1400px;
            margin: 0 auto;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 30px;
            min-width: 0;
        }

        .input-area,
        .output-area,
        .sidebar {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border-main);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: background-color 0.3s, border-color 0.3s;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

            .card-header h3 {
                margin: 0;
            }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-btn {
            background-color: var(--bg-input);
            border: 1px solid var(--border-main);
            color: var(--text-secondary);
            padding: 8px 12px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

            .header-btn:hover {
                background-color: var(--bg-hover);
                color: var(--text-main);
                border-color: #d1d9e0;
            }

            .header-btn svg {
                width: 18px;
                height: 18px;
                stroke: currentColor;
            }

        #themeToggleBtn .moon-icon {
            display: none;
        }

        #themeToggleBtn .sun-icon {
            display: block;
        }

        [data-theme='dark'] #themeToggleBtn .moon-icon {
            display: block;
        }

        [data-theme='dark'] #themeToggleBtn .sun-icon {
            display: none;
        }


        #mobileMenuBtn {
            display: none;
        }

        #inputControls {
            display: flex;
            align-items: stretch;
        }

        textarea#pnrInput {
            flex-grow: 1;
            width: 100%;
            height: 120px;
            padding: 15px;
            border: 1px solid var(--border-main);
            border-right: none;
            border-radius: 6px 0 0 6px;
            font-family: Raleway, sans-serif;
            resize: vertical;
            box-sizing: border-box;
            background-color: var(--bg-main);
            color: var(--text-main);
        }

            textarea#pnrInput:focus {
                outline: none;
                border-color: var(--primary-blue);
                box-shadow: 0 0 0 3px rgba(74, 105, 189, 0.2);
                position: relative;
                z-index: 2;
            }

        #baggageAmountInput {
            height: 30px;
            width: 100%;
            font-size: 20px;
            font-weight: bolder;
        }

        #convertBtn {
            background-color: var(--primary-blue);
            color: white;
            font-size: 16px;
            margin: 0;
            border-radius: 0;
            border: 1px solid var(--primary-blue);
            border-left: none;
            padding: 10px 18px;
            cursor: pointer;
        }

            #convertBtn:hover {
                background-color: var(--primary-blue-hover);
            }

        .vertical-icon-group {
            display: flex;
            flex-direction: column;
        }

        .control-icon-btn {
            background-color: var(--bg-input);
            color: var(--text-secondary);
            border: 1px solid var(--border-main);
            border-left: none;
            padding: 10px;
            min-width: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s ease;
            flex: 1;
        }

            .control-icon-btn:hover {
                background-color: var(--bg-hover);
                color: var(--text-main);
                z-index: 1;
            }

        #pasteBtn {
            border-radius: 0 6px 0 0;
            border-bottom: 0.5px solid var(--border-main);
        }

        #clearBtn {
            border-radius: 0 0 6px 0;
            border-top: 0.5px solid var(--border-main);
        }

        .input-actions-group {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            margin-top: 15px;
        }

        button {
            padding: 10px 18px;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        #adultCountInput,
        #childCountInput,
        #infantCountInput {
            width: 50px;
            text-align: center;
        }

        #currencySelect {
            width: 100px;
            padding: 8px;
            border: 1px solid var(--border-main);
            border-radius: 4px;
            font-size: 14px;
            background-color: var(--bg-card);
            color: var(--text-main);
        }

        .leg-header-icon {
            width: 24px;
            height: 24px;
            margin: 0 0 -6px 10px;
            /* This puts space to the left of the icon */
        }

        .toggle-switch {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toggle-switch-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .toggle-switch input[type="checkbox"] {
            height: 0;
            width: 0;
            visibility: hidden;
        }

        .toggle-switch .switch-body {
            cursor: pointer;
            width: 48px;
            height: 24px;
            background: #ccc;
            display: block;
            border-radius: 100px;
            position: relative;
            transition: background-color 0.2s;
        }

        [data-theme='dark'] .toggle-switch .switch-body {
            background: var(--secondary-dark);
        }

        .toggle-switch .switch-body::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: #fff;
            border-radius: 20px;
            transition: 0.2s;
        }

        .toggle-switch input:checked + .switch-body {
            background: var(--success-green);
        }

            .toggle-switch input:checked + .switch-body::after {
                left: calc(100% - 2px);
                transform: translateX(-100%);
            }

        .c-unit-toggle {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }

        .c-unit-toggle__input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .c-unit-toggle__label {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--primary-blue);
            border-radius: 40px;
            transition: background-color 0.3s;
        }

            .c-unit-toggle__label::before {
                position: absolute;
                content: "";
                height: 19px;
                width: 20px;
                top: 3px;
                left: 4px;
                background-color: white;
                border-radius: 50%;
                transition: transform 0.3s;
            }

        .c-unit-toggle__options {
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 105%;
            padding: 0 6px;
            color: white;
            font-weight: bold;
            font-size: 10px;
        }

        .c-unit-toggle__input:checked + .c-unit-toggle__label {
            background-color: var(--success-green);
        }

            .c-unit-toggle__input:checked + .c-unit-toggle__label::before {
                transform: translateX(21px);
            }

        .fare-options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 25px;
            margin-top: 15px;
        }

        .fare-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

            .fare-group.hidden {
                display: none;
            }

            .fare-group label {
                font-size: 14px;
                font-weight: 500;
                color: var(--text-secondary);
            }

            .fare-group input,
            .fare-group select {
                padding: 8px;
                border: 1px solid var(--border-main);
                border-radius: 4px;
                width: 100%;
                box-sizing: border-box;
                background-color: var(--bg-card);
                color: var(--text-main);
            }

            .fare-group .count-fare-wrapper {
                display: flex;
            }

                .fare-group .count-fare-wrapper > div {
                    flex: 0.4;
                }

        .baggage-options {
            margin-top: 20px;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px 20px;
        }

        .combobox-container {
            position: relative;
            width: 90px;
        }

        .toggle-text {
            color: var(--text-secondary);
        }

        .combobox-input {
            width: 55px;
            padding: 4px 2px 4px 8px;
            border-radius: 4px;
            border: 1px solid var(--border-main);
            text-align: center;
            box-sizing: border-box;
            background-color: var(--bg-card);
            color: var(--text-main);
        }

        .combobox-arrow {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 24px;
            background: transparent;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .combobox-arrow::after {
                content: '';
                border-left: 5px solid transparent;
                border-right: 5px solid transparent;
                border-top: 5px solid var(--text-secondary);
            }

        .combobox-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            border: 1px solid var(--border-main);
            border-radius: 4px;
            background: var(--bg-card);
            z-index: 100;
            max-height: 150px;
            overflow-y: auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: none;
        }

            .combobox-dropdown.open {
                display: block;
            }

        .combobox-option {
            padding: 8px;
            cursor: pointer;
        }

            .combobox-option:hover {
                background-color: var(--bg-hover);
            }

        #allTheWayInputs {
            display: none;
            align-items: center;
            gap: 10px;
        }

            #allTheWayInputs.visible {
                display: flex;
            }

        .output-area .output-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        #output {
            width: fit-content;
            min-width: 300px;
            max-width: 100%;
            overflow-x: auto;
            margin: 15px 0 200px 0;
        }

            #output[contenteditable="true"] {
                border: 2px dashed #3498db;
                padding: 10px;
                border-radius: 8px;
                background-color: #fafdff;
            }

        .info {
            color: #fff;
            padding: 15px;
            background-color: #000;
            border: 1px solid #2980b9;
            border-radius: 8px;
        }

        .error {
            color: #e74c3c;
            padding: 15px;
            background-color: #fdecea;
            border: 1px solid #ef9a9a;
            border-radius: 8px;
        }

        /* === FULLY CORRECTED AND ISOLATED ITINERARY STYLES === */
        #output .output-container {
            border: 1px solid #e0e6ec !important;
            background: #ffffff !important;
            box-sizing: border-box !important;
            /* ADD THESE 2 LINES: */
            max-width: 1000px;
            /* Restricts width to a document size */
            margin: 0 auto;
            /* Centers it on the page */
        }

            #output .output-container * {
                /* Base text color */
                color: #000000;
            }

        #output .itinerary-main-logo-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 10px;
            border-bottom: 1px solid #eee !important;
        }

        #output .itinerary-main-logo {
            max-width: 150px;
            max-height: 45px;
            object-fit: contain;
        }

        #output .itinerary-logo-text {
            font-size: .8em;
            text-align: right;
            line-height: 1.3;
            white-space: pre-line;
            color: #5f6c7b !important;
        }

        #output .itinerary-header {
            padding: 15px;
            border-bottom: 1px solid #eee !important;
        }

            #output .itinerary-header p {
                margin: 0;
                font-size: 14px;
            }

        #output .itinerary-leg-header {
            text-align: center;
            font-weight: bold;
            font-size: 1.1em;
            margin-top: 10px;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e0e6ec !important;
            text-transform: uppercase;
            color: #3498db !important;
            /* Original blue from first file */
        }

            #output .itinerary-leg-header:first-of-type {
                margin-top: 10px;
            }

        #output .flight-item {
            padding: 7px 15px 0px;
            /* border-bottom: 1px dashed #ccc !important; */
        }

            #output .flight-item:last-child {
                border-bottom: none !important;
            }

        #output .transit-item {
            font-style: italic;
            text-align: center;
            padding: 8px 0;
            margin-top: -1px;
            background: #fff !important;
            font-size: 15px;
            font-weight: bold;
        }

            #output .transit-item.transit-short {
                color: #e74c3c !important;
                /* Original red */
            }

            #output .transit-item.transit-minimum {
                color: #27ae60 !important;
                /* Original green */
            }

            #output .transit-item.transit-long {
                color: #f39c12 !important;
                /* Original yellow */
            }

        #output .airline-logo {
            width: 95px;
            height: 65px;
            object-fit: contain;
            border-radius: 5px;
        }

        #output .flight-header {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 10px;
        }

        #output .flight-detail {
            font-size: 13px;
            margin-bottom: 5px;
            color: #34495e !important;
        }

            #output .flight-detail.notes-detail {
                white-space: pre-wrap;
                word-break: break-word;
            }

            #output .flight-detail strong {
                margin-right: 5px;
                color: #5f6c7b !important;
            }

        #output .flight-content {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        #output .fare-summary {
            font-weight: 500;
            margin: -1px 0 5px 10px;
            padding-top: 15px;
            border-top: 1px solid #e0e6ec !important;
            font-size: 14px;
            white-space: pre-line;
        }

            #output .fare-summary strong {
                font-size: 1.1em;
            }

        /* --- sidebar scroll bar styling --- */
        body::-webkit-scrollbar,
        .history-list::-webkit-scrollbar,
        .preview-content::-webkit-scrollbar {
            width: 1px;
            max-height: 10px;
        }

        body::-webkit-scrollbar-thumb {
            background-color: blue;
            top: 50px;
            border-radius: 20px;
        }

            body::-webkit-scrollbar-thumb:hover {
                background-color: white;
            }

        /* --- sidebar scroll bar styling --- */
        .sidebar::-webkit-scrollbar {
            width: 0px;
            max-height: 10px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background-color: white;
            top: 50px;
            border-radius: 20px;
        }

            .sidebar::-webkit-scrollbar-thumb:hover {
                background-color: white;
            }

        /* --- Sidebar & Modal Styles --- */
        .sidebar {
            position: sticky;
            top: 20px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
            font-family: monospace;
        }

            .sidebar h3 {
                margin-top: 0;
                font-size: x-large;
            }

            .sidebar h4 {
                margin: 20px 0 10px;
                color: var(--text-main);
            }

        .options label {
            display: block;
            margin: 10px 0;
            cursor: pointer;
            font-size: 15px
        }

        .time-format-group label {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-right: 20px;
        }

        .custom-transit-input {
            margin-left: 25px;
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 8px
        }

            .custom-transit-input.hidden {
                display: none
            }

            .custom-transit-input label {
                margin: 0;
                font-size: 14px
            }

        #customBrandingSection {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-main)
        }

            #customBrandingSection.hidden {
                display: none
            }

        .custom-branding-input {
            margin-bottom: 15px
        }

            .custom-branding-input label {
                font-weight: 500;
                margin-bottom: 8px;
                display: block
            }

            .custom-branding-input input[type=file],
            .custom-branding-input textarea {
                width: 100%;
                box-sizing: border-box;
                padding: 8px;
                border-radius: 4px;
                border: 1px solid var(--border-main);
                background-color: var(--bg-card);
                color: var(--text-main);
            }

        .clear-btn {
            background-color: white;
            color: red;
            border: 1px solid rgba(255, 0, 0, 0.5);
            border-radius: 4px;
        }

        .custom-logo-preview {
            max-height: 45px;
            max-width: 150px;
            margin-top: 8px;
            display: none;
            border: 1px solid #ddd;
            padding: 3px;
            border-radius: 4px
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, .6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity .3s, visibility .3s
        }

            .modal-overlay:not(.hidden) {
                opacity: 1;
                visibility: visible
            }

        .modal-content {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, .3);
            width: 95%;
            max-width: 1100px;
            height: 85vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        /* 2. Create a wrapper to hold List (Left) and Preview (Right) */
        .history-split-container {
            display: flex;
            flex: 1;
            /* Take remaining height */
            overflow: hidden;
            /* Prevent body scroll */
            gap: 20px;
            margin-top: 10px;
            border-top: 1px solid var(--border-main);
        }

        .modal-overlay:not(.hidden) .modal-content {
            transform: scale(1)
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-main);
            padding-bottom: 15px;
            margin-bottom: 15px
        }

            .modal-header .close-btn {
                background: 0 0;
                border: none;
                font-size: 2.5rem;
                line-height: 1;
                color: var(--text-secondary);
                cursor: pointer;
                padding: 0;
                margin: 0
            }

        .history-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px
        }

        #screenshotBtn,
        #copyTextBtn {
            display: none;
        }

        #showNotesLabel {
            display: none;
        }

        #showTransitLabel {
            display: none;
        }

        #transitSymbolInput {
            width: 120px;
            padding: 5px;
            background-color: #cbcbcb;
            border: 1px solid var(--border-main);
            color: white;
            border-radius: 4px;
        }

        #formatTransitTime {
            display: none;
        }

        #showNotes {
            display: none;
        }

        #screenshotBtn,
        #copyTextBtn,
        .use-history-btn {
            background: var(--secondary-dark);
        }

            #screenshotBtn:hover {
                background: green;
            }

            #copyTextBtn:hover,
            .use-history-btn:hover {
                background: var(--secondary-dark-hover);
            }

        #historySearchInput,
        #historySortSelect {
            padding: 8px;
            border: 1px solid var(--border-main);
            border-radius: 4px;
            flex-grow: 1;
            background-color: var(--bg-card);
            color: var(--text-main);
        }

        /* 3. Style the List (Left Side) */
        .history-list {
            flex: 0 0 350px;
            /* Fixed width for list */
            overflow-y: auto;
            border-right: 1px solid var(--border-main);
            padding-right: 10px;
        }


        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--border-main);
            transition: background-color .2s, transform .2s
        }

            .history-item:hover {
                background-color: var(--bg-hover);
                transform: translateX(5px)
            }

            .history-item:active {
                background-color: var(--bg-hover);
                transform: translateX(5px)
            }

        .history-item-pax {
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 5px
        }

        .history-item-details {
            font-size: .9em;
            color: var(--text-secondary);
        }

        /* 4. Style the Preview (Right Side) */
        #historyPreviewPanel {
            position: relative;
            /* Reset from absolute */
            top: auto;
            left: auto;
            width: auto;
            height: auto;
            background: var(--bg-card);
            transform: none !important;
            /* Disable slide animation */
            flex: 1;
            /* Take remaining width */
            display: flex;
            flex-direction: column;
            padding: 0 0 0 10px;
            z-index: 1;
        }

            #historyPreviewPanel:not(.hidden) {
                transform: translateX(0%)
            }

            /* Hide the close button inside the preview panel on desktop (not needed) */
            #historyPreviewPanel .preview-header #closePreviewBtn {
                display: none;
            }

            #historyPreviewPanel:empty::before {
                content: "Select an item from the list to view details.";
                display: block;
                text-align: center;
                margin-top: 50px;
                color: var(--text-secondary);
            }


        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 25px;
            border-bottom: 1px solid var(--border-main);
            flex-shrink: 0
        }

        .preview-content {
            padding: 20px;
            overflow: auto;
            flex-grow: 1
        }

            .preview-content img {
                max-width: 100%;
                height: auto;
                display: block;
                margin: 0 auto;
                border: 1px solid #ddd
            }

            .preview-content pre {
                white-space: pre-wrap;
                word-wrap: break-word;
                background: var(--bg-main);
                padding: 15px;
                border-radius: 4px
            }

        .popup-notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2050;
            display: flex;
            flex-direction: column;
            gap: 10px
        }

        .popup-notification {
            background-color: var(--secondary-dark);
            color: #fff;
            padding: 12px 20px;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, .15);
            opacity: 0;
            transform: translateX(100%);
            transition: all .5s cubic-bezier(.68, -.55, .27, 1.55)
        }

            .popup-notification.show {
                opacity: 1;
                transform: translateX(0)
            }

        .loading-spinner {
            display: none;
            width: 40px;
            height: 40px;
            margin: 20px auto;
            border: 4px solid var(--bg-hover);
            border-top: 4px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite
        }

        @keyframes spin {
            0% {
                transform: rotate(0)
            }

            100% {
                transform: rotate(360deg)
            }
        }

        @media (max-width:1000px) {
            body {
                padding: 10px
            }

            .body-no-scroll {
                overflow: hidden !important;
                height: 100vh;
            }

            /* #inputControls {
                flex-wrap: wrap;
            } */
            /*
            textarea#pnrInput {
                border-radius: 6px;
                border-right: 1px solid var(--border-main);
                width: 100%;
                flex-basis: 100%;
                margin-bottom: 8px;
            } */

            /* #convertBtn {
                flex-basis: 100%;
                border-radius: 6px !important;
                border-left: 1px solid var(--border-main) !important;
                margin-bottom: 8px;
            } */

            /* .vertical-icon-group {
                flex-direction: row;
                width: 100%;
            } */

            /* .control-icon-btn {
                flex-grow: 1;
                border-radius: 6px !important;
                border: 1px solid var(--border-main) !important;
            } */

            .container {
                gap: 20px
            }

            #mobileMenuBtn {
                display: flex;
            }

            .sidebar {
                position: fixed;
                top: 0;
                right: 0;
                height: 100%;
                z-index: 1020;
                width: 300px;
                max-width: 80vw;
                box-shadow: -5px 0 15px rgba(0, 0, 0, .2);
                transform: translateX(100%);
                transition: transform .7s ease-in-out
            }

                .sidebar.is-open {
                    transform: translateX(0)
                }
        }

        #notes-header {
            padding-left: 15px;
            color: red !important;
        }

        .itinerary-notes {
            padding-left: 15px;
        }

        #refreshBtn {
            font-family: 'Courier New', Courier, monospace;
            background-color: transparent;
            cursor: pointer;
            display: none;
            margin: 0;
            padding: 0;
            animation: pulse 1s infinite;
        }



        #span-pc {
            padding-right: 4px;
            padding-left: -5px;
        }

        footer {
            height: 200px;
            width: 100%;
            background-color: var(--bg-footer);
            margin: 0 auto;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 5px;
            margin-top: 20px;
        }

        .contact-form {
            display: inline-flex;
            flex-direction: column;
            max-width: 400px;
            width: 100%;
            box-sizing: border-box;
            padding-top: 10px;
            height: 202px;
            position: relative;
            z-index: 0;
        }

        .footer-content {
            color: var(--text-secondary);
            max-width: 400px;
            display: inline-block;
        }

        .about-me,
        .contact-form,
        .footer-content {
            border: 1px solid var(--border-main);
            gap: 10px;
            height: 100%;
            margin: 0 auto;
            padding-left: 20px;
            padding-right: 20px;
            border-radius: 5px;
            box-shadow: 0px 0px 5px rgba(0, 127, 255, 0.6);
            z-index: 1;
        }

        .about-me {
            font-family: monospace;
            display: inline-flex;
            font-size: large;
            min-width: 300px;
            max-width: 400px;
            height: auto;
        }

            .about-me a {
                color: var(--primary-blue);
                text-decoration: none;
            }

                .about-me a:hover {
                    text-decoration: underline;
                }

            .about-me img {
                width: 40px;
                height: 40px;
                margin-left: 5px;
            }

                .about-me img:hover {
                    transform: scale(1.1);
                    transition: transform 0.2s;
                }

        #copyRight {
            top: 50px;
        }

        .myLogo {
            width: 30px;
            height: 30px;
            position: sticky;
            margin-top: 15px;
            left: 100%;
            border-radius: 0px;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            z-index: -1;
        }

        .box {
            display: inline-block;
            width: 3px;
            height: 3px;
            background: white;
            margin: 0px;
            border-radius: 50%;
            grid-template-columns: 5fr 1fr;
        }

        .boxScale {
            animation: boxScale 2s infinite;
        }

        @keyframes boxScale {
            0% {
                transform: scale(1);
            }

            33% {
                transform: scale(0.2);
            }

            66% {
                transform: scale(1);
                background-color: black;
            }

            100% {
                transform: scale(1);
                background-color: white;
            }
        }

        #aboutDeveloper {
            font-size: large;
            margin-top: 15px;
            font-family: sans-serif;
        }

        #developerName {
            font-size: x-large;
            font-weight: bold;
            border-radius: 15px;
            background-color: rgba(0, 127, 255, 0.3);
            font-family: cursive;
            box-shadow: 0px 2px 50px 5px rgba(0, 127, 255, 0.6);
        }

            #developerName:hover {
                animation: nameColor 2s infinite;
            }

        @keyframes nameColor {
            0% {
                color: var(--primary-blue);
            }

            25% {
                color: rgb(0, 0, 0);
            }

            50% {
                color: rgb(80, 65, 52);
            }

            75% {
                color: rgb(252, 144, 149);
            }

            100% {
                color: var(--primary-blue);
            }
        }

        .change1s {
            animation: moveBoxes 2s infinite;
        }

        .change2s {
            animation: moveBoxes 2s 0.5s infinite;
        }

        .change3s {
            animation: moveBoxes 2s 1s infinite;
        }

        .change4s {
            animation: moveBoxes 2s 1.5s infinite;
        }

        .change5s {
            animation: moveBoxes 2s 2s infinite;
        }

        .change6s {
            animation: moveBoxes 2s 2.5s infinite;
        }

        .change7s {
            animation: moveBoxesColor 2s 3s infinite;
        }

        .change8s {
            animation: moveBoxesColor 2s 3.5s infinite;
        }

        .change9s {
            animation: moveBoxesColor 2s 4s infinite;
        }

        .change10s {
            animation: moveBoxesColor 2s 4.5s infinite;
        }

        .change11s {
            animation: moveBoxesColor 2s 5s infinite;
        }

        @keyframes moveBoxes {
            0% {
                background-color: white;
            }

            50% {
                background-color: rgb(255, 2, 14);
            }

            100% {
                background-color: white;
            }
        }

        @keyframes moveBoxesColor {
            0% {
                background: white;
            }

            50% {
                background: rgb(255, 123, 0);
            }

            100% {
                background: white;
            }
        }

        #nameInput,
        #emailInput,
        #messageInput {
            padding: 8px;
            border: 1px solid var(--border-main);
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
            background-color: var(--bg-card);
            color: var(--text-main);
        }

        button#submitBtn {
            background-color: var(--primary-blue);
        }

        .halts-direct {
            color: green;
            font-weight: bold;
        }

        .halts-with-stop {
            color: orange;
            /* Example: You can choose any color or default */
        }

        #baggageQuickButtons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            margin-top: 8px;
        }

        /* Quick baggage buttons */
        .bag-btn {
            padding: 5px 12px;
            border: 1px solid var(--primary-blue);
            border-radius: 4px;
            cursor: pointer;
            background: var(--bg-button, #fff);
            color: var(--text-main, #000);
            transition: 0.2s;
        }

            /* Hover effect for light/dark mode */
            .bag-btn:hover {
                background: var(--text-secondary, #e0e0e0);
                color: var(--text-main, #000);
            }

            /* Active button highlight */
            .bag-btn.active {
                background: var(--accent-color, #00aaff);
                color: #fff;
            }

        /* Dark mode overrides */
        [data-theme="dark"] .bag-btn {
            background: white;
            color: var(--text-main-dark, #000);
            border-color: var(--primary-blue-dark, #4a69bd);
        }

            [data-theme="dark"] .bag-btn:hover {
                background: var(--text-secondary-dark, #555);
                color: var(--text-main-dark, #fff);
            }

            [data-theme="dark"] .bag-btn.active {
                background: var(--accent-color-dark, #00ccff);
                color: #000;
            }

        .btn-pcs {
            background-color: var(--primary-blue-hover);
            color: white;
        }

        [data-theme="dark"] .btn-pcs {
            background-color: transparent;
            color: white;
            border-color: white;
        }

        #reportErrorBtn {
            position: relative;
            padding: 9px 17px;
            cursor: pointer;
            background-color: #c70508;
            color: white;
            border: 1px solid #a00405;
            border-radius: 6px;
            font-weight: bold;
            font-size: 16px;
        }

            #reportErrorBtn:hover {
                background-color: #a00405;
            }

            /* Tooltip */
            #reportErrorBtn .tooltip {
                visibility: hidden;
                width: 220px;
                background-color: #333;
                color: #fff;
                text-align: center;
                border-radius: 5px;
                padding: 6px;
                position: absolute;
                bottom: 125%;
                left: 50%;
                transform: translateX(-50%);
                opacity: 0;
                transition: opacity 0.3s;
                z-index: 1000;
                pointer-events: none;
            }

            #reportErrorBtn:hover .tooltip {
                visibility: visible;
                opacity: 1;
            }

        @media (max-width: 768px) {
            .history-split-container {
                display: block;
                /* Stack them (or rely on absolute positioning) */
                position: relative;
            }

            .history-list {
                width: 100%;
                border-right: none;
            }

            #historyPreviewPanel {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                transform: translateX(100%) !important;
                /* Re-enable slide */
                transition: transform 0.3s ease;
                background: var(--bg-card);
                padding: 0;
            }

                #historyPreviewPanel:not(.hidden) {
                    transform: translateX(0) !important;
                }

                #historyPreviewPanel .preview-header #closePreviewBtn {
                    display: block;
                    /* Show close button on mobile */
                }
        }

        /* Settings Modal Specific Styles */
        .settings-modal {
            max-width: 800px;
            height: 600px;
            /* Fixed height */
            padding: 0;
            display: flex;
            flex-direction: column;
        }

            .settings-modal .modal-header {
                padding: 20px;
                margin: 0;
                border-bottom: 1px solid var(--border-main);
            }

        .settings-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            /* Prevents full modal scroll */
        }

        /* Left Side Tabs */
        .settings-tabs {
            width: 200px;
            background-color: var(--bg-main);
            border-right: 1px solid var(--border-main);
            padding: 10px 0;
            display: flex;
            flex-direction: column;
        }

        .tab-btn {
            padding: 15px 20px;
            text-align: left;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-weight: 600;
            border-left: 3px solid transparent;
            border-radius: 0;
            justify-content: flex-start;
        }

            .tab-btn:hover {
                background-color: var(--bg-hover);
                color: var(--text-main);
            }

            .tab-btn.active {
                background-color: var(--bg-card);
                color: var(--primary-blue);
                border-left-color: var(--primary-blue);
            }

        /* Right Side Content */
        .settings-content {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background-color: var(--bg-card);
        }

        .tab-pane {
            display: none;
        }

            .tab-pane.active {
                display: block;
                animation: fadeIn 0.3s ease;
            }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Settings Form Elements */
        .checkbox-grid-settings {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .setting-group {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid var(--border-main);
            border-radius: 6px;
        }

            .setting-group h4 {
                margin-top: 0;
                color: var(--primary-blue);
            }

        /* Responsive Settings */
        /*@media (max-width: 768px) {
            .settings-container {
                flex-direction: column;
            }

            .settings-tabs {
                width: 100%;
                flex-direction: row;
                border-right: none;
                border-bottom: 1px solid var(--border-main);
                overflow-x: auto;
            }

            .tab-btn {
                border-left: none;
                border-bottom: 3px solid transparent;
                white-space: nowrap;
            }

            .tab-btn.active {
                border-left-color: transparent;
                border-bottom-color: var(--primary-blue);
            }

            .checkbox-grid-settings {
                grid-template-columns: 1fr;
            }
        }*/

        .refreshBtn {
            border: 1px solid white;
        }

        @keyframes pulse {
            0% {
                color: rgb(0, 15, 148);
                /* scale: 1.2; */
            }

            100% {
                color: white;
            }
        }

        .old-version {
            font-size: 15px;
            font-weight: bold;
            font-family: monospace;
            background-color: var(--text-main);
            padding: 5px 10px;
            border-radius: 4px;
            color: var(--bg-main);
        }

        .active-version {
            font-size: 15px;
            font-weight: bold;
            font-family: monospace;
            background-color: var(--primary-blue);
            padding: 5px 10px;
            border-radius: 4px;
            color: white;
        }

        .non-active-version {
            font-size: 15px;
            font-weight: bold;
            font-family: monospace;
            background-color: var(--bg-main);
            padding: 5px 10px;
            border-radius: 4px;
            color: var(--text-secondary);
            border: 1px dotted var(--border-main);
        }

            .non-active-version:hover {
                cursor: pointer;
                background-color: var(--primary-blue);
                color: white;
                border: 1px solid white;
            }

            .non-active-version a {
                text-decoration: none;
                color: inherit;
            }

        .blur-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 5vh;
            /* 30% of screen height */
            backdrop-filter: blur(10px);
            pointer-events: none;
            z-index: 9999;
            transition: opacity 0.3s ease;
            opacity: 1;
            box-shadow: inset 10px 10px -10px -10px rgba(0, 0, 0, 0.3);
        }

        .logo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 12px;
            margin-top: 10px;
        }

        .logo-option {
            border: 2px solid transparent;
            padding: 8px;
            border-radius: 6px;
            background: var(--bg-main);
            cursor: pointer;
            transition: 0.2s;
            text-align: center;
        }

            .logo-option img {
                max-width: 70px;
                max-height: 40px;
                object-fit: contain;
            }

            .logo-option.selected {
                border-color: var(--primary-blue);
                background: var(--bg-card);
                box-shadow: 0px 0px 6px rgba(0, 0, 255, 0.3);
            }


        /* Wrapper to hold the Flight Leg and the Input Box side-by-side */
        .leg-wrapper {
            display: flex;
            gap: 10px;
            align-items: stretch;
            /* Makes them the same height */
            margin-bottom: 5px;
            /* Spacing between rows */
        }

        /* The Input Box Styling */
        .side-input-panel {
            width: 160px;
            /* Fixed width for the controls */
            background-color: #f0f2f5;
            border: 1px dashed #ccc;
            border-radius: 6px;
            padding: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 5px;
        }

            .side-input-panel input {
                width: 100%;
                box-sizing: border-box;
                padding: 5px;
                font-size: 13px;
                border: 1px solid #ddd;
                border-radius: 4px;
                text-align: center;
                font-weight: bold;
            }

        .btn-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4px;
        }

        .mini-btn {
            font-size: 10px;
            padding: 4px 0;
            cursor: pointer;
            background: #fff;
            border: 1px solid #4a69bd;
            color: #4a69bd;
            border-radius: 3px;
            transition: 0.2s;
        }

            .mini-btn:hover {
                background: #4a69bd;
                color: white;
            }


        /* 2. The Input Field inside the panel */
        .floating-baggage-panel input {
            width: 20%;
            box-sizing: border-box;
            padding: 8px;
            margin-bottom: 8px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
            font-size: 13px;
            color: #2c3e50;
        }

        /* 4. The Buttons (New Style) */
        .float-btn {
            background-color: skyblue;
            color: white;
            border: none;
            padding: 6px 4px;
            font-size: 11px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s, transform 0.1s;
            box-shadow: 0 2px 4px rgba(74, 105, 189, 0.2);
            margin: 0 2px;
        }

            .float-btn:hover {
                background-color: #324b8f;
                /* Darker blue on hover */
                transform: translateY(-1px);
                /* Slight lift effect */
            }

            .float-btn:active {
                background-color: #324b8f;
                /* Click effect */
            }

        /* Disabled state for report buttons */
        .bag-btn.btn-disabled {
            opacity: 0.4;
            cursor: not-allowed;
            pointer-events: none;
            /* Prevents clicking */
            filter: grayscale(100%);
        }

        /* Optional: Small user badge styling */
        .user-email-badge {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 5px;
            font-style: italic;
            cursor: pointer;
            text-decoration: underline;
        }

        /* Add to your <style> block in index.html */

        /* 1. Visual feedback for the Active Button */
        #highlighterBtn.active-tool {
            background-color: #f1c40f !important;
            /* Vivid Yellow */
            color: #000 !important;
        }

        #eraserBtn.active-tool {
            background-color: #e74c3c !important;
            /* Red for Eraser */
            color: white !important;
            border-color: #c0392b !important;
        }

        /* 2. Cursor changes */
        .cursor-highlight {
            cursor: pointer;
        }

        /* Standard text cursor makes selecting easier */
        .cursor-erase {
            cursor: cell;
        }

        /* Distinct cursor for erasing */

        /* 3. THE THICK HIGHLIGHTER STYLE */
        .user-highlight {
            background-color: #ffff00;
            color: #000 !important;
            /* Enforce black text for contrast */
            /* These properties create the "Tall/Thick" look */
            padding-top: 3px;
            /* Extends yellow above text */
            padding-bottom: 3px;
            /* Extends yellow below text */
            padding-left: 0px;
            /* Small buffer on left */
            padding-right: 0px;
            /* Small buffer on right */
            /* Adds a slight bleed effect to look like ink */
            box-shadow: 0 0 0 1px #ffff00;
            border-radius: 2px;
            /* Softens the corners slightly */
        }

        #highlighterBtn {
            color: black;
            padding: 0;
            width: 30px;
            height: 30px;
        }

        #eraserBtn {
            color: red;
            padding: 0;
            width: 30px;
            height: 30px;
        }

        #ActionToolBtn {
            float: right;
            margin-top: -20px;
            display: none;
        }
    </style>
</head>

<body>
    <div class="blur-bottom" id="blurSection"></div>
    <div class="container">
        <div class="main-content">
            <div class="input-area card">

                <div class="card-header">
                    <h3>Input PNR Data</h3>
                    <div id="refreshTimer" class="popup-notification-refresh header-btn">
                        <span id="timer">02:00:00</span>
                        <button id="refreshBtn" onclick="refreshPage()">Refresh Now</button>
                    </div>

                    <div class="header-actions">
                        <button id="advancedSettingsBtn" class="header-btn" title="Advanced Settings">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                </path>
                            </svg>
                            Settings
                        </button>
                        <button id="historyBtn" class="header-btn" title="View history">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            History
                        </button>
                        <button id="themeToggleBtn" class="header-btn" title="Toggle Theme">
                            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                 stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="5"></circle>
                                <line x1="12" y1="1" x2="12" y2="3"></line>
                                <line x1="12" y1="21" x2="12" y2="23"></line>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                <line x1="1" y1="12" x2="3" y2="12"></line>
                                <line x1="21" y1="12" x2="23" y2="12"></line>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                 stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                            </svg>
                        </button>
                        <button id="mobileMenuBtn" class="header-btn" title="Open Menu">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <line x1="3" y1="12" x2="21" y2="12"></line>
                                <line x1="3" y1="6" x2="21" y2="6"></line>
                                <line x1="3" y1="18" x2="21" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                </div>

                <div id="inputControls">
                    <textarea id="pnrInput" placeholder="Enter PNR data here..."></textarea>

                    <button id="convertBtn">Convert PNR</button>

                    <div class="vertical-icon-group">
                        <button id="pasteBtn" class="control-icon-btn" title="Paste from clipboard">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                 fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2">
                                </path>
                                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                            </svg>
                        </button>
                        <button id="clearBtn" class="control-icon-btn" title="Clear input">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                 fill="none" stroke="var(--danger-red)" stroke-width="2.5" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                </path>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="input-actions-group">
                    <label class="toggle-switch" title="If enabled, PNR will be converted automatically after pasting.">
                        <span class="toggle-switch-label">
                            <span class="toggle-text">
                                Auto
                                Convert
                            </span>
                        </span>
                        <input type="checkbox" id="autoConvertToggle">
                        <span class="switch-body"></span>
                    </label>
                </div>

                <div class="fare-options-grid">
                    <div class="fare-group">
                        <label for="adultCountInput">ADLT</label>
                        <div class="count-fare-wrapper">
                            <div>
                                <input id="adultCountInput" type="text" inputmode="decimal" value="1"
                                       title="Number of Adults">
                            </div>
                            <div>
                                <input id="adultFareInput" type="text" inputmode="decimal" placeholder="Fare"
                                       title="Fare">
                            </div>
                        </div>
                    </div>
                    <div class="fare-group">
                        <label for="childCountInput">CHLD</label>
                        <div class="count-fare-wrapper">
                            <div>
                                <input id="childCountInput" type="text" inputmode="decimal" value="0"
                                       title="Number of Children">
                            </div>
                            <div>
                                <input id="childFareInput" type="text" inputmode="decimal" placeholder="Fare"
                                       title="Fare">
                            </div>
                        </div>
                    </div>
                    <div class="fare-group">
                        <label for="infantCountInput">INFT</label>
                        <div class="count-fare-wrapper">
                            <div>
                                <input id="infantCountInput" type="text" inputmode="decimal" value="0"
                                       title="Number of Infants">
                            </div>
                            <div><input id="infantFareInput" type="text" inputmode="decimal" placeholder="Fare"></div>
                        </div>
                    </div>
                    <div class="fare-group" id="taxInputContainer">
                        <label for="taxInput">Tax (per person)</label><input id="taxInput" type="text"
                                                                             inputmode="decimal" placeholder="Tax">
                    </div>
                    <div class="fare-group" id="feeInputContainer">
                        <label for="feeInput">Fee (per person)</label><input id="feeInput" type="text"
                                                                             inputmode="decimal" placeholder="Fee">
                    </div>
                    <div class="fare-group">
                        <label for="currencySelect">Currency</label><select id="currencySelect">
                            <option value="USD" selected>USD $</option>
                            <option value="EUR">EUR </option>
                            <option value="INR">INR </option>
                            <option value="RWF">RWF</option>
                        </select>
                    </div>
                </div>

                <div class="baggage-options">
                    <label for="baggageParticular">Baggage:</label>
                    <input type="radio" id="baggageParticular" name="baggageOption" value="particular" checked hidden>
                    <label for="baggageParticular" hidden>Per segment</label>

                    <div class="combobox-container" id="baggageCombobox">
                        <label for="baggageAmountInput"></label>
                        <input type="text" inputmode="decimal" class="combobox-input" id="baggageAmountInput"
                               placeholder="23">

                        <!-- Quick-Select Baggage Buttons -->
                    </div>
                    <div class="c-unit-toggle">
                        <input type="checkbox" id="unit-selector-checkbox" class="c-unit-toggle__input" />
                        <label class="c-unit-toggle__label" for="unit-selector-checkbox">
                            <span class="c-unit-toggle__options">
                                <span id="span-pc">PC</span>
                                <span> KG</span>
                            </span>
                        </label>
                    </div>
                    <div id="baggageQuickButtons">
                        <button class="bag-btn" data-value="0" data-unit="KG">0 KG</button>
                        <button class="bag-btn" data-value="15" data-unit="KG">15 KG</button>
                        <button class="bag-btn" data-value="23" data-unit="KG">23 KG</button>
                        <button class="bag-btn" data-value="30" data-unit="KG">30 KG</button>

                        <button class="bag-btn btn-pcs" data-value="1" data-unit="PC">1 PC</button>
                        <button class="bag-btn btn-pcs" data-value="2" data-unit="PC">2 PC</button>
                        <button class="bag-btn btn-pcs" data-value="3" data-unit="PC">3 PC</button>
                    </div>
                    <div class="class-overwrite-options"
                         style="margin-top: 15px; border-top: 1px solid var(--border-main); padding-top: 15px;">
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 8px;">
                            <label for="non-visible" style="font-weight: bold; display: block; margin:0;">
                                Force Cabin
                                Class:
                            </label>
                            <span style="font-size: 10px; color: var(--text-secondary); font-style: italic;">
                                System Report Active
                            </span>
                        </div>

                        <div id="classQuickButtons"
                             style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;">
                            <button class="bag-btn class-override-btn btn-disabled"
                                    data-value="Economy">
                                Economy
                            </button>
                            <button class="bag-btn class-override-btn btn-disabled"
                                    data-value="Business">
                                Business
                            </button>
                            <button class="bag-btn class-override-btn btn-disabled" data-value="First">First</button>
                            <button class="bag-btn class-override-btn btn-disabled" data-value="Premium Economy">
                                Prem
                                Eco
                            </button>
                        </div>
                        <p id="pnrStatusMsg" style="font-size: 10px; color: red; margin-top: 5px; display:none;">
                            * Enter
                            PNR data to enable options
                        </p>
                    </div>
                </div>
                <div class="loading-spinner" id="loadingSpinner"></div>
            </div>
            <div class="output-area card">
                <div class="output-actions">
                    <div>
                        <h3>Converted Itinerary</h3>
                        <button id="screenshotBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="#00ff00" width="15px"
                                 height="15px" viewBox="0 0 32 32" version="1.1">
                                <title>whatsapp</title>
                                <path d="M26.576 5.363c-2.69-2.69-6.406-4.354-10.511-4.354-8.209 0-14.865 6.655-14.865 14.865 0 2.732 0.737 5.291 2.022 7.491l-0.038-0.070-2.109 7.702 7.879-2.067c2.051 1.139 4.498 1.809 7.102 1.809h0.006c8.209-0.003 14.862-6.659 14.862-14.868 0-4.103-1.662-7.817-4.349-10.507l0 0zM16.062 28.228h-0.005c-0 0-0.001 0-0.001 0-2.319 0-4.489-0.64-6.342-1.753l0.056 0.031-0.451-0.267-4.675 1.227 1.247-4.559-0.294-0.467c-1.185-1.862-1.889-4.131-1.889-6.565 0-6.822 5.531-12.353 12.353-12.353s12.353 5.531 12.353 12.353c0 6.822-5.53 12.353-12.353 12.353h-0zM22.838 18.977c-0.371-0.186-2.197-1.083-2.537-1.208-0.341-0.124-0.589-0.185-0.837 0.187-0.246 0.371-0.958 1.207-1.175 1.455-0.216 0.249-0.434 0.279-0.805 0.094-1.15-0.466-2.138-1.087-2.997-1.852l0.010 0.009c-0.799-0.74-1.484-1.587-2.037-2.521l-0.028-0.052c-0.216-0.371-0.023-0.572 0.162-0.757 0.167-0.166 0.372-0.434 0.557-0.65 0.146-0.179 0.271-0.384 0.366-0.604l0.006-0.017c0.043-0.087 0.068-0.188 0.068-0.296 0-0.131-0.037-0.253-0.101-0.357l0.002 0.003c-0.094-0.186-0.836-2.014-1.145-2.758-0.302-0.724-0.609-0.625-0.836-0.637-0.216-0.010-0.464-0.012-0.712-0.012-0.395 0.010-0.746 0.188-0.988 0.463l-0.001 0.002c-0.802 0.761-1.3 1.834-1.3 3.023 0 0.026 0 0.053 0.001 0.079l-0-0.004c0.131 1.467 0.681 2.784 1.527 3.857l-0.012-0.015c1.604 2.379 3.742 4.282 6.251 5.564l0.094 0.043c0.548 0.248 1.25 0.513 1.968 0.74l0.149 0.041c0.442 0.14 0.951 0.221 1.479 0.221 0.303 0 0.601-0.027 0.889-0.078l-0.031 0.004c1.069-0.223 1.956-0.868 2.497-1.749l0.009-0.017c0.165-0.366 0.261-0.793 0.261-1.242 0-0.185-0.016-0.366-0.047-0.542l0.003 0.019c-0.092-0.155-0.34-0.247-0.712-0.434z" />
                            </svg> Copy Screenshot
                        </button>
                        <button id="copyTextBtn"> Copy Text</button>
                    </div>
                    <button id="reportErrorBtn" class="btn-disabled">
                        Report Error
                        <span class="tooltip">Click to report last PNR</span>
                    </button>
                    <label class="toggle-switch" title="Enable to make small text corrections directly in the output.">
                        <span class="toggle-switch-label">Enable Editing</span>
                        <input type="checkbox" id="editableToggle">
                        <span class="switch-body"></span>
                    </label>
                </div>
                <div class="actionToolBtn" id="ActionToolBtn">
                    <button id="highlighterBtn" title="Highlighter">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" viewBox="0 0 24 24"
                             fill="none">
                            <path opacity="0.5"
                                  d="M22 10.5V12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2H13.5"
                                  stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" />
                            <path d="M17.3009 2.80624L16.652 3.45506L10.6872 9.41993C10.2832 9.82394 10.0812 10.0259 9.90743 10.2487C9.70249 10.5114 9.52679 10.7957 9.38344 11.0965C9.26191 11.3515 9.17157 11.6225 8.99089 12.1646L8.41242 13.9L8.03811 15.0229C7.9492 15.2897 8.01862 15.5837 8.21744 15.7826C8.41626 15.9814 8.71035 16.0508 8.97709 15.9619L10.1 15.5876L11.8354 15.0091C12.3775 14.8284 12.6485 14.7381 12.9035 14.6166C13.2043 14.4732 13.4886 14.2975 13.7513 14.0926C13.9741 13.9188 14.1761 13.7168 14.5801 13.3128L20.5449 7.34795L21.1938 6.69914C22.2687 5.62415 22.2687 3.88124 21.1938 2.80624C20.1188 1.73125 18.3759 1.73125 17.3009 2.80624Z"
                                  stroke="#1C274C" stroke-width="1.5" />
                            <path opacity="0.5"
                                  d="M16.6522 3.45508C16.6522 3.45508 16.7333 4.83381 17.9499 6.05034C19.1664 7.26687 20.5451 7.34797 20.5451 7.34797M10.1002 15.5876L8.4126 13.9"
                                  stroke="#1C274C" stroke-width="1.5" />
                        </svg>
                    </button>

                    <button id="eraserBtn" title="Eraser">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" viewBox="0 0 24 24"
                             fill="none">
                            <path d="M7.67004 11.6064L8.20037 12.1367L7.67004 11.6064ZM6 13.9682H5.25H6ZM10.0318 18V18.75V18ZM11.6064 7.67004L11.076 7.13971L11.6064 7.67004ZM12.6506 16.073C12.9435 16.3659 13.4183 16.3659 13.7112 16.073C14.0041 15.7801 14.0041 15.3053 13.7112 15.0124L12.6506 16.073ZM8.98764 10.2888C8.69474 9.99588 8.21987 9.99588 7.92698 10.2888C7.63408 10.5817 7.63408 11.0565 7.92698 11.3494L8.98764 10.2888ZM15.7996 11.8633L11.8633 15.7996L12.924 16.8603L16.8603 12.924L15.7996 11.8633ZM8.20037 12.1367L12.1367 8.20037L11.076 7.13971L7.13971 11.076L8.20037 12.1367ZM8.20037 15.7996C7.6287 15.228 7.25442 14.8514 7.01378 14.536C6.78634 14.2379 6.75 14.0841 6.75 13.9682H5.25C5.25 14.544 5.492 15.0144 5.82124 15.4459C6.13728 15.8601 6.59802 16.3186 7.13971 16.8603L8.20037 15.7996ZM7.13971 11.076C6.59802 11.6177 6.13728 12.0762 5.82124 12.4904C5.492 12.922 5.25 13.3924 5.25 13.9682H6.75C6.75 13.8522 6.78634 13.6984 7.01378 13.4003C7.25442 13.0849 7.6287 12.7084 8.20037 12.1367L7.13971 11.076ZM11.8633 15.7996C11.2916 16.3713 10.9151 16.7456 10.5997 16.9862C10.3016 17.2137 10.1478 17.25 10.0318 17.25V18.75C10.6076 18.75 11.078 18.508 11.5096 18.1788C11.9238 17.8627 12.3823 17.402 12.924 16.8603L11.8633 15.7996ZM7.13971 16.8603C7.6814 17.402 8.13989 17.8627 8.55411 18.1788C8.98563 18.508 9.45604 18.75 10.0318 18.75V17.25C9.91588 17.25 9.76207 17.2137 9.46398 16.9862C9.14858 16.7456 8.77204 16.3713 8.20037 15.7996L7.13971 16.8603ZM15.7996 8.20037C16.3713 8.77204 16.7456 9.14858 16.9862 9.46398C17.2137 9.76207 17.25 9.91588 17.25 10.0318H18.75C18.75 9.45604 18.508 8.98563 18.1788 8.55411C17.8627 8.13989 17.402 7.6814 16.8603 7.13971L15.7996 8.20037ZM16.8603 12.924C17.402 12.3823 17.8627 11.9238 18.1788 11.5096C18.508 11.078 18.75 10.6076 18.75 10.0318H17.25C17.25 10.1478 17.2137 10.3016 16.9862 10.5997C16.7456 10.9151 16.3713 11.2916 15.7996 11.8633L16.8603 12.924ZM16.8603 7.13971C16.3186 6.59802 15.8601 6.13728 15.4459 5.82124C15.0144 5.492 14.544 5.25 13.9682 5.25V6.75C14.0841 6.75 14.2379 6.78634 14.536 7.01378C14.8514 7.25442 15.228 7.6287 15.7996 8.20037L16.8603 7.13971ZM12.1367 8.20037C12.7084 7.6287 13.0849 7.25442 13.4003 7.01378C13.6984 6.78634 13.8522 6.75 13.9682 6.75V5.25C13.3924 5.25 12.922 5.492 12.4904 5.82124C12.0762 6.13728 11.6177 6.59802 11.076 7.13971L12.1367 8.20037ZM13.7112 15.0124L8.98764 10.2888L7.92698 11.3494L12.6506 16.073L13.7112 15.0124Z"
                                  fill="#1C274C" />
                            <path opacity="0.5"
                                  d="M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z"
                                  stroke="#1C274C" stroke-width="1.5" />
                        </svg>
                    </button>
                </div>

                <div id="output">
                    <div class="info">Enter PNR data and click Convert to begin.</div>
                </div>

            </div>
        </div>
        <div id="advancedSettingsModal" class="modal-overlay hidden">
            <div class="modal-content settings-modal">
                <div class="modal-header">
                    <h2>Advanced Settings</h2>
                    <div class="old-version non-active-version" onclick="https://pnrconverter-sv.vercel.app/">
                        <a href="https://pnrconverter-sv.vercel.app">Old Version 1.0</a>
                    </div>
                    <div class="new-version active-version">New Version 1.2.5</div>
                    <button id="closeSettingsBtn" class="close-btn"></button>
                </div>

                <div class="settings-container">
                    <!-- Sidebar / Tabs for Settings -->
                    <div class="settings-tabs">
                        <button class="tab-btn active" data-tab="general">General Display</button>
                        <button class="tab-btn" data-tab="formats">Time & Formats</button>
                        <button class="tab-btn" data-tab="branding">Branding & Logo</button>
                    </div>

                    <!-- Settings Content Area -->
                    <div class="settings-content">

                        <!-- Tab 1: General Display -->
                        <div id="tab-general" class="tab-pane active">
                            <!-- <h3>Visibility Options</h3>
                                            <div class="checkbox-grid-settings">
                                                <label><input type="checkbox" id="showAirline" checked> Show Airline Logo/Name</label>
                                                <label><input type="checkbox" id="showAircraft" checked> Show Aircraft Type</label>
                                                <label><input type="checkbox" id="showOperatedBy" checked> Show "Operated By"</label>
                                                <label><input type="checkbox" id="showClass"> Show Cabin Class</label>
                                                <label><input type="checkbox" id="showMeal"> Show Meal Service</label>
                                                <label id="showNotesLabel"><input type="checkbox" id="showNotes"> Show PNR Notes</label>
                                            </div>-->

                            <h3>Fare Details</h3>
                            <div class="checkbox-grid-settings">
                                <label><input type="checkbox" id="showTaxes"> Display Tax Input Block</label>
                                <label><input type="checkbox" id="showFees"> Display Fee Input Block</label>
                            </div>
                        </div>

                        <!-- Tab 2: Time & Formats -->
                        <div id="tab-formats" class="tab-pane">
                            <h3>Time Format</h3>
                            <div class="setting-group">
                                <h4>Flight Segments</h4>
                                <div class="time-format-group">
                                    <label>
                                        <input type="radio" id="segmentTime12" name="segmentTimeFormat" value="12h"> 12-Hour
                                        (02:00 PM)
                                    </label>
                                    <label>
                                        <input type="radio" id="segmentTime24" name="segmentTimeFormat" value="24h" checked>
                                        24-Hour (14:00)
                                    </label>
                                </div>
                            </div>
                            <div class="setting-group">
                                <h4>Transit/Layover</h4>
                                <div class="time-format-group">
                                    <label for="transitTime12-modal">
                                        <input type="radio" id="transitTime12-modal" name="transitTimeFormat_modal" value="12h">
                                        12-Hour
                                    </label>
                                    <label for="transitTime24-modal">
                                        <input type="radio" id="transitTime24-modal" name="transitTimeFormat_modal" value="24h"
                                               checked>
                                        24-Hour
                                    </label>
                                </div>
                            </div>

                            <hr>
                            <h3>Transit Visuals</h3>
                            <label id="showTransitLabel">
                                <input type="checkbox" id="showTransit" checked> Show
                                Transit Rows in
                                Itinerary
                            </label>
                            <div id="transitSymbolContainer" class="custom-transit-input" style="margin-top: 10px;">
                                <label for="transitSymbolInput">Separator Symbol:</label>
                                <input type="text" id="transitSymbolInput" placeholder=":::::::">
                            </div>
                        </div>

                        <!-- Tab 3: Branding -->
                        <div id="tab-branding" class="tab-pane">
                            <h3>Custom Branding</h3>
                            <label>
                                <input type="checkbox" id="showItineraryLogo" checked> Enable Main Itinerary
                                Logo
                            </label>

                            <div id="customBrandingSection">
                                <div class="custom-branding-input">
                                    <label for="customLogoInput">Upload Agency Logo:</label>
                                    <input type="file" id="customLogoInput" accept="image/png, image/jpeg, image/gif">
                                    <img id="customLogoPreview" alt="Logo Preview" class="custom-logo-preview">
                                </div>
                                <div class="custom-branding-input">
                                    <label for="non-visible">Select Company Logo:</label>
                                    <input id="non-visible" hidden />

                                    <div id="logoSelectGrid" class="logo-grid"></div>

                                    <img id="selectedLogoPreview" class="custom-logo-preview" />
                                </div>
                                <div class="custom-branding-input">
                                    <label for="customTextInput">Agency Contact Info:</label>
                                    <textarea id="customTextInput" rows="4"
                                              placeholder="Your Company Name&#10;Address&#10;Phone Number"></textarea>
                                </div>
                                <button id="clearCustomBrandingBtn" class="clear-btn">Reset Branding</button>
                            </div>
                        </div>
                        <hr>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar card">
            <div class="options">
                <h3>Display Options</h3>
                <label><input type="checkbox" id="showAirline" checked> Show Airline</label>
                <label><input type="checkbox" id="showAircraft" checked> Show Aircraft</label>
                <label><input type="checkbox" id="showOperatedBy" checked> Show Operated By</label>
                <label><input type="checkbox" id="showClass"> Show Cabin</label>
                <label><input type="checkbox" id="showMeal"> Show Meal</label>
                <label id="showNotesLabel">
                    <input type="checkbox" id="showNotes"> Show
                    Notes
                </label>

                <!-- <hr>
                <h4>Segment Time Format</h4>
                <div class="time-format-group">
                    <label><input type="radio" id="segmentTime12" name="segmentTimeFormat" value="12h"> 12-Hour</label>
                    <label><input type="radio" id="segmentTime24" name="segmentTimeFormat" value="24h" checked>
                        24-Hour</label>
                </div>

                <label id="showTransitLabel"><input type="checkbox" id="showTransit" checked> Show Transit
                    Times</label>
                <div id="transitSymbolContainer" class="custom-transit-input">
                    <label for="transitSymbolInput">Separator:</label>
                    <input type="text" id="transitSymbolInput" placeholder=":::::::">
                </div> -->
                <!-- <hr>
                <h4>Fare Display Options</h4>
                <label><input type="checkbox" id="showTaxes" checked> Show Taxes</label>
                <label><input type="checkbox" id="showFees" checked> Show Fees</label> -->


                <hr>
                <div class="options-group">
                    <h3>Additional Information to Display</h3>
                    <div class="checkbox-grid">
                        <div class="checkbox-container">
                            <label for="showCovidNotice">
                                <input type="checkbox" id="showCovidNotice"
                                       name="itineraryNotes" value="covid"> Date Change Allowed With Applicable
                                <br>Penalties.
                            </label>
                        </div>
                        <div class="checkbox-container">
                            <label for="showTravelInsurance">
                                <input type="checkbox" id="showTravelInsurance"
                                       name="itineraryNotes" value="insurance"> Before Departure Changes Are Allowed
                                <br>With
                                Applicable Penalty.
                            </label>
                        </div>
                        <div class="checkbox-container">
                            <label for="showVisaInfo">
                                <input type="checkbox" id="showVisaInfo" name="itineraryNotes"
                                       value="visa"> Before Departure Refundable With <br>Applicable Penalties.
                            </label>
                        </div>
                        <div class="checkbox-container">
                            <label for="dontShowTravelInsurance">
                                <input type="checkbox" id="dontShowTravelInsurance"
                                       name="itineraryNotes" value="insurance"> After Departure, Non Refundable.
                            </label>
                        </div>
                        <div class="checkbox-container">
                            <label for="noShowRefundPolicy">
                                <input type="checkbox" id="noShowRefundPolicy"
                                       name="itineraryNotes" value="visa"> Refundable With Applicable Penalties.
                            </label>
                        </div>
                        <div class="checkbox-container">
                            <label for="showHealthDocs">
                                <input type="checkbox" id="showHealthDocs" name="itineraryNotes"
                                       value="health"> Non Refundable.
                            </label>
                        </div>
                        <div class="checkbox-container">
                            <label for="noShow">
                                <input type="checkbox" id="noShow" name="itineraryNotes" value="health">
                                No Show Fee Where Applicable
                            </label>
                        </div>
                    </div>
                </div>
                <!-- <h4>Branding</h4>
                <label><input type="checkbox" id="showItineraryLogo" checked>Show Main Itinerary Logo</label>
                <div id="customBrandingSection">
                    <div class="custom-branding-input">
                        <label for="customLogoInput">Custom Logo:</label>
                        <input type="file" id="customLogoInput" accept="image/png, image/jpeg, image/gif">
                        <img id="customLogoPreview" alt="Logo Preview" class="custom-logo-preview">
                    </div>
                    <div class="custom-branding-input">
                        <label for="customTextInput">Custom Text:</label>
                        <textarea id="customTextInput" rows="3" placeholder="Your Company Name Contact Info"></textarea>
                    </div>
                    <button id="clearCustomBrandingBtn" class="clear-btn">Clear Branding</button>
                </div> -->
                <div id="formatTransitTime">
                    <h4>Transit Time Format</h4>
                    <div class="time-format-group">
                        <label for="transitTime12-sidebar">
                            <input type="radio" id="transitTime12-sidebar" name="transitTimeFormat_sidebar" value="12h">
                            12-Hour
                        </label>
                        <label for="transitTime24-sidebar">
                            <input type="radio" id="transitTime24-sidebar" name="transitTimeFormat_sidebar" value="24h"
                                   checked>
                            24-Hour
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="historyModal" class="modal-overlay hidden">
        <div class="modal-content">
            <!-- Header Section -->
            <div class="modal-header">
                <h2>Conversion History</h2>
                <button id="closeHistoryBtn" class="close-btn"></button>
            </div>

            <!-- Controls Section -->
            <div class="history-controls">
                <input type="text" id="historySearchInput" placeholder="Search by passenger or route...">
                <select id="historySortSelect" title="search-history">
                    <option value="newest">Sort by Newest First</option>
                    <option value="oldest">Sort by Oldest First</option>
                </select>
            </div>

            <!-- NEW Split Container -->
            <div class="history-split-container">

                <!-- Left Side: List -->
                <div id="historyList" class="history-list">
                    <div class="blur-bottom" id="blurSection"></div>
                    <!-- Items will be injected here by JS -->
                </div>

                <!-- Right Side: Preview -->
                <div id="historyPreviewPanel" class="hidden">
                    <div class="preview-header">
                        <h3>Preview</h3>
                        <button id="closePreviewBtn" class="close-btn"></button>
                    </div>
                    <div id="previewContent" class="preview-content">
                        <!-- Preview details injected here -->
                        <div class="blur-bottom" id="blurSection"></div>
                    </div>
                </div>

            </div>
            <!-- End Split Container -->
        </div>
    </div>

    <div id="popupContainer" class="popup-notification-container"></div>

    <hr>

    <footer>
        <div class="about-me">
            <div class="about-me-text">
                <p id="aboutDeveloper">About Developer</p>
                <p id="developerName">FAIZAAN BHATI</p>
                <a href="mailto:faizaanbhati95719@gmail.com"><img src="./icons/google.png" alt="gmail"></a>
                <a href="https://github.com/FAIZAAN01/"><img src="./icons/github.png" alt="github"></a>
                <a href="https://www.linkedin.com/in/faizaan-bhati-5905b1248/">
                    <img src="./icons/linkedin.png"
                         alt="linkedin">
                </a>
                <p id="copyRight"> &copy; 2025, Faizaan Bhati</p>
            </div>
            <div class="myLogo">
                <div class="box change1s"></div>
                <div class="box change6s"></div>
                <div class="box change7s"></div>
                <div class="box change11s"></div>
                <div class="box change10s"></div>

                <div class="box change4s"></div>
                <div class="box boxScale"></div>
                <div class="box boxScale"></div>
                <div class="box boxScale"></div>
                <div class="box change9s"></div>

                <div class="box change3s"></div>
                <div class="box change3s"></div>
                <div class="box boxScale"></div>
                <div class="box change9s"></div>
                <div class="box change8s"></div>

                <div class="box change2s"></div>
                <div class="box boxScale"></div>
                <div class="box boxScale"></div>
                <div class="box boxScale"></div>
                <div class="box change9s"></div>

                <div class="box change1s"></div>
                <div class="box boxScale"></div>
                <div class="box change10s"></div>
                <div class="box change11s"></div>
                <div class="box change10s"></div>
            </div>

        </div>
        <form action="https://api.web3forms.com/submit" method="POST" id="contactForm" class="contact-form">
            <input type="hidden" name="access_key" value="8e411ec7-fb3e-48fc-8907-d8bf830626ff">
            <input id="nameInput" type="text" name="name" placeholder="Name" autocomplete="on" required>
            <input id="emailInput" type="email" name="email" placeholder="Email" autocomplete="on" required>
            <input type="hidden" name="pnr" id="pnrHidden">
            <textarea id="messageInput" name="message" placeholder="Message" required></textarea>
            <button id="submitBtn" type="submit">Send Query</button>
        </form>
        <div class="footer-content">
            <p>Latest Update: <span id="latestUpdate">Version 1.2.5 deployed on 21 Nov 2025</span></p>
            <p> |- New Advance Settings Option</p>
            <p> |- more accessible interface</p>
            <p> |- Bug fixes and performance improvements</p>
        </div>
        <!-- all rights are reseverd by faizaan bhati -->

    </footer>

    <script src="../js/html2canvas.min.js"></script>
    <script src="./main.js"></script>
    <!-- Put this script at the very bottom of your body, after all elements -->

    <script>
        let lastPastedPNR = ""; // Always preserve latest pasted value

        const pnrInput = document.getElementById("pnrInput");
        const pnrHidden = document.getElementById("pnrHidden");
        const reportBtn = document.getElementById("reportErrorBtn");

        // Track only paste event
        pnrInput.addEventListener("paste", (e) => {
            const pastedText = (e.clipboardData || window.clipboardData).getData("text").trim();
            if (pastedText) {
                lastPastedPNR = pastedText; // Store permanently until new paste
            }
        });

        // Button click: use last pasted PNR only
        reportBtn.addEventListener("click", () => {
            if (!lastPastedPNR) {
                alert("No PNR pasted yet!");
                return;
            }
            pnrHidden.value = lastPastedPNR;
            document.getElementById("contactForm").submit();
        });

        // Tooltip update
        reportBtn.addEventListener("mouseenter", () => {
            const tooltip = reportBtn.querySelector(".tooltip");
            tooltip.textContent = lastPastedPNR
                ? "Click to report PNR"
                : "";
        });
    </script>


    <script>
        function startRefreshTimer(hours = 2) {
            const timerEl = document.getElementById("timer");
            const refreshBtn = document.getElementById("refreshBtn");

            // Make sure both elements exist
            if (!timerEl || !refreshBtn) {
                console.error("Timer or Refresh button not found in DOM!");
                return;
            }

            let totalSeconds = Math.floor(hours * 3600);

            // Just in case  clear any existing interval before starting a new one
            if (window.refreshInterval) clearInterval(window.refreshInterval);

            window.refreshInterval = setInterval(() => {
                // Calculate remaining time
                const hoursLeft = Math.floor(totalSeconds / 3600);
                const minutesLeft = Math.floor((totalSeconds % 3600) / 60);
                const secondsLeft = totalSeconds % 60;

                // Update text
                timerEl.textContent =
                    `${hoursLeft.toString().padStart(2, "0")}:` +
                    `${minutesLeft.toString().padStart(2, "0")}:` +
                    `${secondsLeft.toString().padStart(2, "0")}`;

                totalSeconds--;

                // When time runs out
                if (totalSeconds < 0) {
                    clearInterval(window.refreshInterval);
                    timerEl.textContent = "";
                    timerEl.style.color = "#00ff80"; // optional highlight
                    refreshBtn.style.display = "flex";

                    // Hide optional message safely
                    const refreshMessageEl = document.getElementById("refreshMessage");
                    if (refreshMessageEl) refreshMessageEl.style.display = "none";
                }
            }, 1000);
        }

        // Start timer once the page is fully loaded
        window.addEventListener("DOMContentLoaded", () => {
            startRefreshTimer(2); // 2 hours by default
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Mobile sidebar script ---
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.createElement('div');
            overlay.style.cssText = 'position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); z-index:1015; display:none;';
            document.body.appendChild(overlay);

            function closeSidebar() {
                sidebar.classList.remove('is-open');
                overlay.style.display = 'none';
            }

            if (mobileMenuBtn && sidebar) {
                mobileMenuBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    sidebar.classList.toggle('is-open');
                    overlay.style.display = sidebar.classList.contains('is-open') ? 'block' : 'none';
                });
                document.addEventListener('click', (event) => {
                    if (sidebar.classList.contains('is-open') && !sidebar.contains(event.target) && !mobileMenuBtn.contains(event.target)) {
                        closeSidebar();
                    }
                });
                overlay.addEventListener('click', closeSidebar);
            }

            // Quick Baggage Buttons Logic
            const bagInput = document.getElementById('baggageAmountInput');
            const unitToggle = document.getElementById('unit-selector-checkbox');
            const bagButtons = document.querySelectorAll('.bag-btn:not(.class-override-btn)');

            const triggerUpdate = () => {
                bagInput.dispatchEvent(new Event('input', { bubbles: true }));
            };

            bagButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const value = btn.dataset.value;
                    const unit = btn.dataset.unit;

                    bagInput.value = value;

                    // Auto-switch KG/PC toggle
                    unitToggle.checked = (unit === "PC");

                    // Active styling
                    bagButtons.forEach(x => x.classList.remove('active'));
                    btn.classList.add('active');

                    triggerUpdate();
                });
            });

            // When unit changes manually  reset highlighting
            unitToggle.addEventListener('change', () => {
                bagButtons.forEach(x => x.classList.remove('active'));
                bagInput.value = "";
                triggerUpdate();
            });

            // --- Baggage Combobox + Quick Buttons Script ---
            const baggageInput = document.getElementById('baggageAmountInput');
            const baggageDropdown = document.getElementById('baggageDropdown');
            const comboboxContainer = document.getElementById('baggageCombobox');
            const baggageQuickButtons = document.getElementById('baggageQuickButtons'); // NEW

            if (unitToggle && baggageInput && baggageDropdown && comboboxContainer) {
                const kgOptions = ['0', '15', '23'];
                const pcOptions = ['1', '2', '3'];

                const triggerManualInput = () => {
                    baggageInput.dispatchEvent(new Event('input', { bubbles: true }));
                };

                const updateUIForUnit = () => {
                    const isPcMode = unitToggle.checked;
                    baggageInput.placeholder = isPcMode ? "Enter pcs" : "Enter kgs";

                    // Reset button highlights
                    document.querySelectorAll('.bag-btn').forEach(btn => btn.classList.remove('active'));
                };

                // ---- Quick Button Events ----
                if (baggageQuickButtons) {
                    baggageQuickButtons.addEventListener('click', (e) => {
                        const btn = e.target.closest('.bag-btn');
                        if (!btn) return;

                        const value = btn.dataset.value;
                        const unit = btn.dataset.unit;

                        // Update input
                        baggageInput.value = value;

                        // Auto switch toggle if needed
                        unitToggle.checked = (unit === "PC");

                        // Active UI
                        document.querySelectorAll('.bag-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');

                        triggerManualInput();
                    });
                }

                // ---- Dropdown Functions (still working) ----
                const updateBaggageOptions = (isPcMode) => {
                    baggageDropdown.innerHTML = '';
                    const optionsArray = isPcMode ? pcOptions : kgOptions;

                    optionsArray.forEach(value => {
                        const optionDiv = document.createElement('div');
                        optionDiv.className = 'combobox-option';
                        optionDiv.textContent = value;
                        optionDiv.addEventListener('mousedown', (e) => {
                            e.preventDefault();
                            baggageInput.value = value;
                            baggageDropdown.classList.remove('open');

                            triggerManualInput();
                        });
                        baggageDropdown.appendChild(optionDiv);
                    });

                    updateUIForUnit();
                };

                // Initial load
                updateBaggageOptions(unitToggle.checked);

                // Toggle KG/PC changes
                unitToggle.addEventListener('change', () => {
                    updateBaggageOptions(unitToggle.checked);
                    triggerManualInput();
                });

                // Dropdown toggle
                comboboxContainer.addEventListener('click', (e) => {
                    if (e.target.classList.contains('combobox-arrow') || e.target === baggageInput) {
                        baggageDropdown.classList.toggle('open');
                    }
                });

                baggageInput.addEventListener('focus', () => baggageDropdown.classList.add('open'));

                document.addEventListener('click', (e) => {
                    if (!comboboxContainer.contains(e.target)) {
                        baggageDropdown.classList.remove('open');
                    }
                });
            }

            // --- Dark Mode Script ---
            const themeToggleBtn = document.getElementById('themeToggleBtn');
            const docElement = document.documentElement;

            const applyTheme = (theme) => {
                docElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
            };

            const savedTheme = localStorage.getItem('theme') || 'light';
            applyTheme(savedTheme);

            themeToggleBtn.addEventListener('click', () => {
                const currentTheme = docElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                applyTheme(newTheme);
            });
        });
    </script>
    <script>
        // 2 hours in milliseconds
        const refreshTime = 2 * 60 * 60 * 1000;

        setTimeout(() => {
            const refreshNotice = document.getElementById("refreshNotice");
            refreshNotice.textContent = " It's been 2 hours. Please refresh the page to get the latest updates!";

            // Optional: Auto refresh after 10 seconds of showing the message
            // setTimeout(() => location.reload(), 10000);
        }, refreshTime);

        function refreshPage() {
            location.reload();
        }
    </script>
    <script>
        const PRESET_LOGOS = [
            { name: "Default", url: "/simbavoyages.png" },
            { name: "Christmas", url: "/branding_logos/christmas-logo.jpg" },
            { name: "Face", url: "/branding_logos/logo-face.jpg" }
        ];
        const blurEl = document.getElementById('blurSection');

        window.addEventListener('scroll', () => {
            const scrollPos = window.innerHeight + window.scrollY;
            const pageHeight = document.documentElement.scrollHeight;

            if (scrollPos >= pageHeight) {
                blurEl.style.opacity = "0"; // Hide blur at bottom
            } else {
                blurEl.style.opacity = "1"; // Show blur while scrolling
            }
        });
    </script>
    <script>
        // --- Advanced Settings Modal Logic ---

        const settingsModal = document.getElementById('advancedSettingsModal');
        const settingsBtn = document.getElementById('advancedSettingsBtn');
        const closeSettingsBtn = document.getElementById('closeSettingsBtn');
        const settingsTabs = document.querySelectorAll('.settings-tabs .tab-btn');
        const settingsPanes = document.querySelectorAll('.settings-content .tab-pane');

        // Open Modal
        if (settingsBtn && settingsModal) {
            settingsBtn.addEventListener('click', () => {
                settingsModal.classList.remove('hidden');
            });
        }

        // Close Modal (Button)
        if (closeSettingsBtn) {
            closeSettingsBtn.addEventListener('click', () => {
                settingsModal.classList.add('hidden');
            });
        }

        // Close Modal (Click Outside)
        if (settingsModal) {
            settingsModal.addEventListener('click', (e) => {
                // Ensure we only close if clicking the overlay, not the content
                if (e.target === settingsModal) {
                    settingsModal.classList.add('hidden');
                }
            });
        }

        // Tab Switching Logic
        settingsTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // 1. Remove active class from all tabs
                settingsTabs.forEach(t => t.classList.remove('active'));
                // 2. Add active class to clicked tab
                tab.classList.add('active');

                // 3. Hide all panes
                settingsPanes.forEach(pane => pane.classList.remove('active'));

                // 4. Show target pane
                const targetId = `tab-${tab.dataset.tab}`;
                const targetPane = document.getElementById(targetId);
                if (targetPane) {
                    targetPane.classList.add('active');
                }
            });
        });
    </script>
    <script>
        const form = document.getElementById('contactForm');
        const submitBtn = document.getElementById('submitBtn');

        form.addEventListener('submit', async (e) => {
            e.preventDefault(); // prevent default submission

            submitBtn.disabled = true;
            submitBtn.textContent = "Sending...";

            const formData = new FormData(form);

            try {
                const response = await fetch('https://api.web3forms.com/submit', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                console.log(result);

                if (result.success) {
                    submitBtn.textContent = "Query Sent";
                    form.reset();
                    setTimeout(() => {
                        submitBtn.textContent = "Send Query";
                        submitBtn.disabled = false;
                    }, 3000); // 3 seconds
                } else {
                    submitBtn.textContent = "Failed. Try Again";
                    setTimeout(() => {
                        submitBtn.textContent = "Send Query";
                        submitBtn.disabled = false;
                    }, 3000);
                }

            } catch (error) {
                console.error(error);
                submitBtn.textContent = "Error. Try Again";
                setTimeout(() => {
                    submitBtn.textContent = "Send Query";
                    submitBtn.disabled = false;
                }, 3000);
            }
        });
    </script>
    <script>
        window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/speed-insights/script.js"></script>

</body>

</html>