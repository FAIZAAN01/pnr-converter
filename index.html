<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>International PNR Converter</title>

  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: auto; margin: 0 auto; padding: 20px; background-color: #f5f5f5; }
    h1 { color: #2c3e50; text-align: center; margin-bottom: 30px; }
    .container { display: flex; gap: 30px; background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .input-area, .output-area { flex: 1; min-width: 300px; }
    textarea#pnrInput { width: 100%; height: 200px; padding: 12px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; resize: vertical; box-sizing: border-box; }
    button { padding: 12px 25px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; margin-top: 15px; transition: background 0.3s; }
    button:hover { background: #2980b9; }
    .options { margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 4px; }
    .options label { display: block; margin: 8px 0; cursor: pointer; }
    .output-container { border: 1px solid #e0e0e0; border-radius: 8px; background: white; width: 569px; box-sizing: border-box; }
    .itinerary-header { padding: 10px; border-bottom: 1px solid #eee; }
    .itinerary-header h4 { margin: 0 0 5px 0; color: #555; }
    .itinerary-header p { margin: 0; font-family: monospace; font-size: 1.1em; color: #333; }
    .itinerary-block { padding: 3px; }
    .flight-item { border-bottom: 1px dashed #e0e0e0; padding: 10px 0;}
    .flight-item:last-child { border-bottom: none; }
    .transit-item { font-style: italic; color: #a7a7a7; margin: -7px 0; background: #f8f9fa; border-radius: 4px; text-align: center;}
    .airline-logo { width: 60px; height: 60px; object-fit: contain; padding: 4px; background: #fff; border-radius: 4px; border: 0px solid #ddd; vertical-align: middle; }
    .flight-header { font-weight: bold; font-size: 1.1em; color: #2c3e50; margin-bottom: 8px; }
    .flight-detail { font-size: 0.95em; color: #34495e; margin-bottom: 4px; display: flex; flex-wrap: wrap; gap: 5px 10px; }
    .flight-detail strong { white-space: nowrap; color: #555; }
    .flight-content { display: flex; gap: 12px; align-items: flex-start; }
    .flight-content > img { flex-shrink: 0; }
    .flight-content > div { flex: 1; font-size: 14px; min-width: 0; }
    .error { color: #e74c3c; padding: 15px; background-color: #fdecea; border: 1px solid #ef9a9a; border-radius: 4px; margin-bottom: 15px; }
    .info { color: #3498db; padding: 15px; background-color: #e3f2fd; border: 1px solid #bbdefb; border-radius: 4px; margin-bottom: 15px; }
    .dev-banner { padding: 12px; background-color: #fff9c4; color: #f57f17; border-left: 5px solid #fbc02d; margin-bottom: 15px; font-weight: bold; }
    #screenshotBtn { background: #f39c12; margin-right: 10px; }
    #screenshotBtn:hover { background: #e67e22; }
    .fare-summary { margin-top: -1px; margin-left: 5px; padding-top: 10px; border-top: 1px solid #e0e0e0; font-weight: 500; font-size: 14px; white-space: pre-line; }
    .loading-spinner { display: none; width: 40px; height: 40px; margin: 20px auto; border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
   
    #developerModePanel { margin-top: 30px; padding: 20px; background-color: #e8f5e9; border: 1px solid #a5d6a7; border-radius: 8px; display: none; }
    #developerModePanel h2 { color: #2e7d32; margin-top: 0; }
    #developerModePanel h3 { color: #388e3c; margin-top: 20px; margin-bottom: 10px; border-bottom: 1px solid #81c784; padding-bottom: 5px; }
    .db-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    .db-table th, .db-table td { border: 1px solid #c8e6c9; padding: 8px; text-align: left; }
    .db-table th { background-color: #a5d6a7; color: #1b5e20; }
    .db-table input[type="text"] { width: 95%; padding: 6px; border: 1px solid #a5d6a7; border-radius: 3px; box-sizing: border-box; }
    .db-table button, #developerModePanel button { background-color: #4caf50; margin-top: 0; margin-left: 5px; padding: 6px 12px; font-size: 0.9em; }
    .db-table button.delete-btn { background-color: #f44336; }
    #developerModePanel button.add-btn { margin-bottom: 10px; background-color: #29b6f6; }
    #developerModePanel button.save-all-btn { background-color: #4CAF50; color: white; padding: 10px 20px; font-size: 1.1em; margin-top: 20px; margin-bottom: 10px;border: none;border-radius: 5px;cursor: pointer;}
    #developerModePanel button.save-all-btn:hover { background-color: #45a049;}
    @media (max-width: 768px) {.container { flex-direction: column; }}
  </style>
</head>
<body>
  <h1>International PNR Converter</h1>
  
  <div class="container">
    <div class="input-area">
      <h3>Input PNR Data</h3>
      <textarea id="pnrInput" placeholder="Enter PNR data here..."></textarea>
      <button id="convertBtn">Convert PNR</button>
      <div class="loading-spinner" id="loadingSpinner"></div>

      <div style="display: flex; align-items: center; flex-wrap: wrap; gap: 10px; margin-top: 8px;">
        <label for="currencySelect">Currency:</label>
        <select id="currencySelect" style="padding: 4px;"> <option value="USD" selected>$</option> <option value="EUR">â‚¬</option> <option value="INR">â‚¹</option> </select>
        <label for="adultInput">Pax:</label> <input id="adultInput" type="number" min="1" value="1" style="width: 30px; padding: 4px;">
        <label for="fareInput">Fare:</label> <input id="fareInput" type="number" step="any" placeholder="Optional" style="width: 65px; padding: 4px;">
        <label for="feeInput">Fee:</label> <input id="feeInput" type="number" step="any" placeholder="Optional" style="width: 65px; padding: 4px;">
        <label for="taxInput">Tax:</label> <input id="taxInput" type="number" step="any" placeholder="Optional" style="width: 65px; padding: 4px;">
      </div>
      
      <div class="options">
        <h3>Display Options</h3>
        <label><input type="checkbox" id="showAirline" checked> Show Airline</label>
        <label><input type="checkbox" id="showAircraft" checked> Show Aircraft</label>
        <label><input type="checkbox" id="showClass"> Show Class (if available)</label>
        <label><input type="checkbox" id="showMeal"> Show Meal</label>
        <label><input type="checkbox" id="showNotes"> Show Notes</label>
        <label><input type="checkbox" id="showTransit" checked> Show Transit Times</label>
        <label><input type="checkbox" id="use24HourFormat" checked> Use 24-Hour Time</label>
      </div>
    </div>
    
    <div class="output-area">
      <h3>Converted Itinerary</h3>
      <button id="screenshotBtn" style="display:none;">ðŸ“· Copy Screenshot</button>
      <button id="copyTextBtn" style="display:none;">ðŸ“‹ Copy as Text</button>
      <div id="output" contenteditable="true" style="width : fit-content">
        <div class="info">Enter PNR data and click "Convert PNR".</div>
      </div>
    </div>
  </div>

  <div id="developerModePanel">
    <h2>Developer Database Editor</h2>
    <p>Activate by typing "developer" in the input. Save changes by typing "developermarja".</p>
    
    <button class="save-all-btn" id="saveAllDbChangesBtn">Save All Database Changes to Server</button>
    <div id="airlinesEditor">
      <h3>Airline Codes</h3>
      <button class="add-btn" id="addAirlineBtn">Add New Airline</button>
      <table class="db-table" id="airlinesTable">
        <thead><tr><th>Code</th><th>Name</th><th>Action</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="aircraftTypesEditor">
      <h3>Aircraft Types</h3>
      <button class="add-btn" id="addAircraftBtn">Add New Aircraft Type</button>
      <table class="db-table" id="aircraftTypesTable">
        <thead><tr><th>Code</th><th>Name</th><th>Action</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="airportDatabaseEditor">
      <h3>Airport Details</h3>
      <button class="add-btn" id="addAirportBtn">Add New Airport</button>
      <table class="db-table" id="airportDatabaseTable">
        <thead><tr><th>Code</th><th>City</th><th>Name</th><th>Timezone</th><th>Action</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
   
    <div id="logoEditor" style="margin-top: 30px;">
      <h3>Airline Logo Management</h3>
      <p>Upload new logos or update existing ones. Images will be saved using the Airline Code as the filename (e.g., BA.png, EK.svg).</p>
      
      <div>
          <label for="logoAirlineCodeOrName">Airline Code or Name:</label>
          <input type="text" id="logoAirlineCodeOrName" placeholder="e.g., BA or British Airways">
      </div>
      <div style="margin-top: 10px;">
          <label for="logoFileInput">Select Logo File (PNG, SVG, JPG):</label>
          <input type="file" id="logoFileInput" accept="image/png, image/svg+xml, image/jpeg">
      </div>
      <div style="margin-top: 10px;">
          <img id="logoPreview" src="#" alt="Logo Preview" style="max-width: 150px; max-height: 60px; display: none; border: 1px solid #ccc; padding: 5px;">
      </div>
        <button id="uploadLogoBtn" style="margin-top: 15px; background-color: #007bff;">Upload/Update Logo</button>
        <div id="logoUploadStatus" style="margin-top: 10px;"></div>
    </div>
  </div>

<script src="/public/js/html2canvas.min.js"></script>
<script src="/public/js/main.js"></script>
</body>
</html>